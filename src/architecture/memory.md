Added Pyro pipeline/model modules based on `src/architecture/pyro_pipeline_skeleton.md`, `src/architecture/pyro_context.md`, and `src/architecture/pyro_model.md`.
Implemented observed-data preprocessing (step 1) in `scripts/pyro_io.py`, including guide mapping, raw-k filtering (drop cells with k > Kmax), guide-map mismatch warnings, and padded guide inputs with NTCs mapped to guide_id=0 (mask=1) and padding mask=0.
Implemented guide-level decomposition (step 3) and linear predictor (step 4) helpers in `src/models/pyro_model.py` via `build_guide_effects` and `compute_linear_predictor`.
Implemented steps 5–7 in `src/models/pyro_model.py` inside `fate_model`: priors, random-walk gene effects, guide deviations, softmax mapping, and soft-label likelihood with a config-driven fate order and reference fate.
Implemented steps 8–10 in `src/models/pyro_model.py`: minibatched SVI via `fit_svi` (uses `pyro.plate` subsampling) with correct N/B scaling.
Implemented step 11 in `src/models/pyro_model.py`: `reconstruct_theta_samples` draws posterior theta samples and `export_gene_summary_for_ash` computes weighted summaries for a configurable contrast fate; day-weight columns (`w0..w{D-1}`) are added for traceability. Optional stratified bootstrap SE can be enabled in `scripts/fit_pyro_export.py` via `config.yaml`.
Implemented step 12 in pipeline form: added `scripts/fit_pyro_export.py`, `scripts/run_ash.R`, and `scripts/rank_hits.py`, plus `config.yaml` (now includes ref_fate/contrast_fate), `Snakefile`, and conda env specs in `envs/`.
Implemented step 13 diagnostics in `scripts/run_diagnostics.py` (holdout cross-entropy for full vs nuisance-only model; optional guide permutation with a Python-only p-value/BH qvalue hit-rate proxy; optional sanity checks for expected gene-direction effects).
Removed unused pipeline stubs from `src/models/pyro_pipeline.py`; only shared helpers (`make_k_centered`, `to_torch`) remain.
Remaining manual/optional items from `src/architecture/pyro_model.md`: manual review of sanity-check outputs (if enabled).
